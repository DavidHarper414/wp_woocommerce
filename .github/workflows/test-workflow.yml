name: Test workflow
on: pull_request
concurrency: 
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
    test:
        name: Test workflow.
        runs-on: ubuntu-20.04
        steps:
            # - name: Checkout code.
            #   uses: actions/checkout@v3

            - name: Cache modules
              uses: actions/cache@v3
              id: cache-deps
              with:
                path: |
                  ~/.pnpm-store
                  plugins/woocommerce/packages
                  plugins/woocommerce/**/vendor
                key: ${{ runner.os }}-npm-composer-version-${{ secrets.WORKFLOW_CACHE }}-${{ hashFiles('**/composer.lock', '**/pnpm-lock.yaml') }}

            - name: List dirs
              run: ls ~/.pnpm-store
