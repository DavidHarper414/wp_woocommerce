name: 'Release checks'
on:
  push:
    tags:
      - '*'
  workflow_dispatch:
  pull_request:

jobs:
  run-tests:
    name: 'Run tests'
    if: ${{ github.ref_type == 'tag' && github.ref_name != 'nightly' }}
    uses: ./.github/workflows/ci.yml
    with:
      trigger: 'release-checks'
      tag: ${{ github.ref_name }}
      artifact-name: 'woocommerce.zip'
    secrets: inherit
