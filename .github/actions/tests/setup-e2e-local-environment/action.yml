name: Setup E2E local environment
description: Runs the WooCommerce Core E2E tests and generate Allure report.
permissions: {}

inputs:
    enable-hpos:
        description: ENABLE_HPOS
        default: 0
    wp-env-php-version:
        description: WP_ENV_PHP_VERSION
        default: 7.4

env:
    ENABLE_HPOS: ${{ inputs.enable-hpos }}
    WP_ENV_PHP_VERSION: ${{ inputs.wp-env-php-version }}

runs:
    using: composite
    steps:
        - name: Load docker images and start containers.
          working-directory: plugins/woocommerce
          run: pnpm run env:test
